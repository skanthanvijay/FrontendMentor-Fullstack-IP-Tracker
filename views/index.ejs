<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <title>Frontend Mentor | IP Address Tracker</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Style Sheet -->
  <link rel="stylesheet" href="/CSS/master.css">

  <!-- Map Stylesheet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>

  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  <style>
    .attribution { font-size: 11px; text-align: center; position: relative; bottom: 15px;}
    .attribution a { color: white; }
    @media screen and (max-width: 750px) { .attribution { bottom: 45px; } }
  </style>
</head>
<body>

  <div class="main-area" role="main">

    <!-- Title -->
    <h1>IP Address Tracker</h1>


    <!-- Input Area -->
    <form class="input" action="/" method="post">
        <div class="input-group">
          <input class="input-field" type="text" name="ipInput" placeholder="Search for any IP address or domain" autocomplete="off">
          <button class="btn-submit" type="submit" name="ipButton"><img src="/images/icon-arrow.svg" alt=">"></button>
        </div>
    </form>


    <!-- Info Panel -->
    <div class="info-panel">

      <div class="info-cell info-cell-1">
        <div class="inner-cell">
          <h4>IP ADDRESS</h4>
          <h2><%= ipadd %></h2>
        </div>
      </div>

      <div class="info-cell">
        <div class="inner-cell">
          <h4>LOCATION</h4>
          <h2><%= locn %></h2>
        </div>
      </div>

      <div class="info-cell">
        <div class="inner-cell">
          <h4>TIMEZONE</h4>
          <h2>UTC <%= tz %></h2>
        </div>
      </div>

      <div class="info-cell info-cell-4">
        <div class="inner-cell last-cell">
          <h4>ISP</h4>
          <h2><%= intSP %></h2>
        </div>
      </div>

    </div>


    <!-- Map -->
    <div id="mapid"></div>

  </div>



  <!-- Attribution -->
  <div class="attribution" role="footer">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="#">SV.</a>.
  </div>



  <!-- Map Scripts -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

  <script type="text/javascript">
    var mymap = L.map('mapid', {zoomControl: false}).setView([<%= latd %>, <%= lngd %>], 11);
    var marker = L.marker([<%= latd %>, <%= lngd %>]).addTo(mymap);
    new L.Control.Zoom({ position: 'bottomleft' }).addTo(mymap);
    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: "pk.eyJ1Ijoic2thbnRoYW52IiwiYSI6ImNrczFtMWU0ZTBnN2kzMG10MzRrNXh6a2EifQ.ZRyITN7aMB1XwYGFTPCtLg"
    }).addTo(mymap);

    // If invalid IP is inputted
    <%= alertComment %> alert("Invalid IP address.");
  </script>

</body>
</html>
